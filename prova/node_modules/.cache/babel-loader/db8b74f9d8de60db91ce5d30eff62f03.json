{"ast":null,"code":"import 'd3-transition';\nimport { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\nimport { max, min, scan } from 'd3-array';\nimport { scaleLinear, scaleTime } from 'd3-scale';\nimport { adaptListener } from './d3-compat';\nimport { dispatch } from 'd3-dispatch';\nimport { drag } from 'd3-drag';\nimport { easeQuadOut } from 'd3-ease';\nimport { select } from 'd3-selection';\nvar UPDATE_DURATION = 200;\nvar SLIDER_END_PADDING = 8;\nvar KEYBOARD_NUMBER_STEPS = 100;\nvar top = 1;\nvar right = 2;\nvar bottom = 3;\nvar left = 4;\n\nfunction translateX(x) {\n  return 'translate(' + x + ',0)';\n}\n\nfunction translateY(y) {\n  return 'translate(0,' + y + ')';\n}\n\nfunction slider(orientation, scale) {\n  scale = typeof scale !== 'undefined' ? scale.copy() : null;\n  var value = [0];\n  var defaultValue = [0];\n  var domain = [0, 10];\n  var width = 100;\n  var height = 100;\n  var displayValue = true;\n  var handle = 'M-5.5,-5.5v10l6,5.5l6,-5.5v-10z';\n  var step = null;\n  var tickValues = null;\n  var tickPadding = 3;\n  var marks = null;\n  var tickFormat = null;\n  var ticks = null;\n  var displayFormat = null;\n  var fill = null;\n  var listeners = dispatch('onchange', 'start', 'end', 'drag');\n  var selection = null;\n  var identityClamped = null;\n  var handleIndex = null;\n  var k = orientation === top || orientation === left ? -1 : 1;\n  var j = orientation === left || orientation === right ? -1 : 1;\n  var x = orientation === left || orientation === right ? 'y' : 'x';\n  var y = orientation === left || orientation === right ? 'x' : 'y';\n  var transformAlong = orientation === top || orientation === bottom ? translateX : translateY;\n  var transformAcross = orientation === top || orientation === bottom ? translateY : translateX;\n  var axisFunction = null;\n\n  switch (orientation) {\n    case top:\n      axisFunction = axisTop;\n      break;\n\n    case right:\n      axisFunction = axisRight;\n      break;\n\n    case bottom:\n      axisFunction = axisBottom;\n      break;\n\n    case left:\n      axisFunction = axisLeft;\n      break;\n  }\n\n  var handleSelection = null;\n  var fillSelection = null;\n  var textSelection = null;\n\n  if (scale) {\n    domain = [min(scale.domain()), max(scale.domain())];\n\n    if (orientation === top || orientation === bottom) {\n      width = max(scale.range()) - min(scale.range());\n    } else {\n      height = max(scale.range()) - min(scale.range());\n    }\n\n    scale = scale.clamp(true);\n  }\n\n  function slider(context) {\n    selection = context.selection ? context.selection() : context;\n\n    if (!scale) {\n      scale = domain[0] instanceof Date ? scaleTime() : scaleLinear();\n      scale = scale.domain(domain).range(orientation === top || orientation === bottom ? [0, width] : [height, 0]).clamp(true);\n    }\n\n    identityClamped = scaleLinear().range(scale.range()).domain(scale.range()).clamp(true); // Ensure value is valid\n\n    value = value.map(function (d) {\n      return scaleLinear().range(domain).domain(domain).clamp(true)(d);\n    });\n    tickFormat = tickFormat || scale.tickFormat();\n    displayFormat = displayFormat || tickFormat || scale.tickFormat();\n    var axis = selection.selectAll('.axis').data([null]);\n    axis.enter().append('g').attr('transform', transformAcross(k * 7)).attr('class', 'axis');\n    var sliderSelection = selection.selectAll('.slider').data([null]);\n    var sliderEnter = sliderSelection.enter().append('g').attr('class', 'slider').attr('cursor', orientation === top || orientation === bottom ? 'ew-resize' : 'ns-resize').call(drag().on('start', adaptListener(dragstarted)).on('drag', adaptListener(dragged)).on('end', adaptListener(dragended)));\n    sliderEnter.append('line').attr('class', 'track').attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING).attr('stroke', '#bbb').attr('stroke-width', 6).attr('stroke-linecap', 'round');\n    sliderEnter.append('line').attr('class', 'track-inset').attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING).attr('stroke', '#eee').attr('stroke-width', 4).attr('stroke-linecap', 'round');\n\n    if (fill) {\n      sliderEnter.append('line').attr('class', 'track-fill').attr(x + '1', value.length === 1 ? scale.range()[0] - j * SLIDER_END_PADDING : scale(value[0])).attr('stroke', fill).attr('stroke-width', 4).attr('stroke-linecap', 'round');\n    }\n\n    sliderEnter.append('line').attr('class', 'track-overlay').attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING).attr('stroke', 'transparent').attr('stroke-width', 40).attr('stroke-linecap', 'round').merge(sliderSelection.select('.track-overlay'));\n    handleSelection = sliderEnter.selectAll('.parameter-value').data(value.map(function (d, i) {\n      return {\n        value: d,\n        index: i\n      };\n    }));\n    var handleEnter = handleSelection.enter().append('g').attr('class', 'parameter-value').attr('transform', function (d) {\n      return transformAlong(scale(d.value));\n    }).attr('font-family', 'sans-serif').attr('text-anchor', orientation === right ? 'start' : orientation === left ? 'end' : 'middle');\n    handleEnter.append('path').attr('transform', 'rotate(' + (orientation + 1) * 90 + ')').attr('d', handle).attr('class', 'handle').attr('aria-label', 'handle').attr('aria-valuemax', domain[1]).attr('aria-valuemin', domain[0]).attr('aria-valuenow', function (d) {\n      return d.value;\n    }).attr('aria-orientation', orientation === left || orientation === right ? 'vertical' : 'horizontal').attr('focusable', 'true').attr('tabindex', 0).attr('fill', 'white').attr('stroke', '#777').on('keydown', adaptListener(function (event, datum) {\n      var change = step || (domain[1] - domain[0]) / KEYBOARD_NUMBER_STEPS;\n      var index = marks ? scan(marks.map(function (d) {\n        return Math.abs(value[datum.index] - d);\n      })) : null; // TODO: Don't need to loop over value because we know which element needs to change\n\n      function newValue(adjustedValue) {\n        return value.map(function (d, j) {\n          if (value.length === 2) {\n            return j === datum.index ? datum.index === 0 ? Math.min(adjustedValue, alignedValue(value[1])) : Math.max(adjustedValue, alignedValue(value[0])) : d;\n          } else {\n            return j === datum.index ? adjustedValue : d;\n          }\n        });\n      }\n\n      switch (event.key) {\n        case 'ArrowLeft':\n        case 'ArrowDown':\n          if (marks) {\n            slider.value(newValue(marks[Math.max(0, index - 1)]));\n          } else {\n            slider.value(newValue(+value[datum.index] - change));\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'PageDown':\n          if (marks) {\n            slider.value(newValue(marks[Math.max(0, index - 2)]));\n          } else {\n            slider.value(newValue(+value[datum.index] - 2 * change));\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'ArrowRight':\n        case 'ArrowUp':\n          if (marks) {\n            slider.value(newValue(marks[Math.min(marks.length - 1, index + 1)]));\n          } else {\n            slider.value(newValue(+value[datum.index] + change));\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'PageUp':\n          if (marks) {\n            slider.value(newValue(marks[Math.min(marks.length - 1, index + 2)]));\n          } else {\n            slider.value(newValue(+value[datum.index] + 2 * change));\n          }\n\n          event.preventDefault();\n          break;\n\n        case 'Home':\n          slider.value(newValue(domain[0]));\n          event.preventDefault();\n          break;\n\n        case 'End':\n          slider.value(newValue(domain[1]));\n          event.preventDefault();\n          break;\n      }\n    }));\n\n    if (displayValue) {\n      handleEnter.append('text').attr('font-size', 10) // TODO: Remove coupling to font-size in d3-axis\n      .attr(y, k * (24 + tickPadding)).attr('dy', orientation === top ? '0em' : orientation === bottom ? '.71em' : '.32em').attr('transform', value.length > 1 ? 'translate(0,0)' : null).text(function (d, idx) {\n        return displayFormat(value[idx]);\n      });\n    }\n\n    context.select('.track').attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n    context.select('.track-inset').attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n\n    if (fill) {\n      context.select('.track-fill').attr(x + '2', value.length === 1 ? scale(value[0]) : scale(value[1]));\n    }\n\n    context.select('.track-overlay').attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n    context.select('.axis').call(axisFunction(scale).tickFormat(tickFormat).ticks(ticks).tickValues(tickValues).tickPadding(tickPadding)); // https://bl.ocks.org/mbostock/4323929\n\n    selection.select('.axis').select('.domain').remove();\n    context.select('.axis').attr('transform', transformAcross(k * 7));\n    context.selectAll('.axis text').attr('fill', '#aaa').attr(y, k * (17 + tickPadding)).attr('dy', orientation === top ? '0em' : orientation === bottom ? '.71em' : '.32em').attr('text-anchor', orientation === right ? 'start' : orientation === left ? 'end' : 'middle');\n    context.selectAll('.axis line').attr('stroke', '#aaa');\n    context.selectAll('.parameter-value').attr('transform', function (d) {\n      return transformAlong(scale(d.value));\n    });\n    fadeTickText();\n\n    function computeDragNewValue(pos) {\n      var adjustedValue = alignedValue(scale.invert(pos));\n      return value.map(function (d, i) {\n        if (value.length === 2) {\n          return i === handleIndex ? handleIndex === 0 ? Math.min(adjustedValue, alignedValue(value[1])) : Math.max(adjustedValue, alignedValue(value[0])) : d;\n        } else {\n          return i === handleIndex ? adjustedValue : d;\n        }\n      });\n    }\n\n    function dragstarted(event) {\n      select(this).classed('active', true);\n      var pos = identityClamped(orientation === bottom || orientation === top ? event.x : event.y); // Handle cases where both handles are at the same end of the slider\n\n      if (value[0] === domain[0] && value[1] === domain[0]) {\n        handleIndex = 1;\n      } else if (value[0] === domain[1] && value[1] === domain[1]) {\n        handleIndex = 0;\n      } else {\n        handleIndex = scan(value.map(function (d) {\n          return Math.abs(d - alignedValue(scale.invert(pos)));\n        }));\n      }\n\n      var newValue = value.map(function (d, i) {\n        return i === handleIndex ? alignedValue(scale.invert(pos)) : d;\n      });\n      updateHandle(newValue);\n      listeners.call('start', sliderSelection, newValue.length === 1 ? newValue[0] : newValue);\n      updateValue(newValue, true);\n    }\n\n    function dragged(event) {\n      var pos = identityClamped(orientation === bottom || orientation === top ? event.x : event.y);\n      var newValue = computeDragNewValue(pos);\n      updateHandle(newValue);\n      listeners.call('drag', sliderSelection, newValue.length === 1 ? newValue[0] : newValue);\n      updateValue(newValue, true);\n    }\n\n    function dragended(event) {\n      select(this).classed('active', false);\n      var pos = identityClamped(orientation === bottom || orientation === top ? event.x : event.y);\n      var newValue = computeDragNewValue(pos);\n      updateHandle(newValue);\n      listeners.call('end', sliderSelection, newValue.length === 1 ? newValue[0] : newValue);\n      updateValue(newValue, true);\n      handleIndex = null;\n    }\n\n    textSelection = selection.selectAll('.parameter-value text');\n    fillSelection = selection.select('.track-fill');\n  }\n\n  function fadeTickText() {\n    if (selection) {\n      if (displayValue) {\n        var indices = [];\n        value.forEach(function (val) {\n          var distances = [];\n          selection.selectAll('.axis .tick').each(function (d) {\n            distances.push(Math.abs(d - val));\n          });\n          indices.push(scan(distances));\n        });\n        selection.selectAll('.axis .tick text').attr('opacity', function (d, i) {\n          return ~indices.indexOf(i) ? 0 : 1;\n        });\n\n        if (textSelection && value.length > 1) {\n          var rect;\n          var shift;\n          var pos = [];\n          var size = [];\n          textSelection.nodes().forEach(function (d, i) {\n            rect = d.getBoundingClientRect();\n            shift = d.getAttribute('transform').split(/[()]/)[1].split(',')[x === 'x' ? 0 : 1];\n            pos[i] = rect[x] - parseFloat(shift);\n            size[i] = rect[x === 'x' ? 'width' : 'height'];\n          });\n\n          if (x === 'x') {\n            shift = Math.max(0, (pos[0] + size[0] - pos[1]) / 2);\n            textSelection.attr('transform', function (d, i) {\n              return 'translate(' + (i === 1 ? shift : -shift) + ',0)';\n            });\n          } else {\n            shift = Math.max(0, (pos[1] + size[1] - pos[0]) / 2);\n            textSelection.attr('transform', function (d, i) {\n              return 'translate(0,' + (i === 1 ? -shift : shift) + ')';\n            });\n          }\n        }\n      }\n    }\n  }\n\n  function alignedValue(newValue) {\n    if (marks) {\n      var index = scan(marks.map(function (d) {\n        return Math.abs(newValue - d);\n      }));\n      return marks[index];\n    }\n\n    if (step) {\n      var valueModStep = (newValue - domain[0]) % step;\n      var alignValue = newValue - valueModStep;\n\n      if (valueModStep * 2 > step) {\n        alignValue += step;\n      }\n\n      return newValue instanceof Date ? new Date(alignValue) : alignValue;\n    }\n\n    return newValue;\n  }\n\n  function updateValue(newValue, notifyListener) {\n    if (value[0] !== newValue[0] || value.length > 1 && value[1] !== newValue[1]) {\n      value = newValue;\n\n      if (notifyListener) {\n        listeners.call('onchange', slider, newValue.length === 1 ? newValue[0] : newValue);\n      }\n\n      fadeTickText();\n    }\n  }\n\n  function updateHandle(newValue, animate) {\n    if (selection) {\n      animate = typeof animate !== 'undefined' ? animate : false;\n\n      if (animate) {\n        selection.selectAll('.parameter-value').data(newValue.map(function (d, i) {\n          return {\n            value: d,\n            index: i\n          };\n        })).transition().ease(easeQuadOut).duration(UPDATE_DURATION).attr('transform', function (d) {\n          return transformAlong(scale(d.value));\n        }).select('.handle').attr('aria-valuenow', function (d) {\n          return d.value;\n        });\n\n        if (fill) {\n          fillSelection.transition().ease(easeQuadOut).duration(UPDATE_DURATION).attr(x + '1', value.length === 1 ? scale.range()[0] - k * SLIDER_END_PADDING : scale(newValue[0])).attr(x + '2', value.length === 1 ? scale(newValue[0]) : scale(newValue[1]));\n        }\n      } else {\n        selection.selectAll('.parameter-value').data(newValue.map(function (d, i) {\n          return {\n            value: d,\n            index: i\n          };\n        })).attr('transform', function (d) {\n          return transformAlong(scale(d.value));\n        }).select('.handle').attr('aria-valuenow', function (d) {\n          return d.value;\n        });\n\n        if (fill) {\n          fillSelection.attr(x + '1', value.length === 1 ? scale.range()[0] - k * SLIDER_END_PADDING : scale(newValue[0])).attr(x + '2', value.length === 1 ? scale(newValue[0]) : scale(newValue[1]));\n        }\n      }\n\n      if (displayValue) {\n        textSelection.text(function (d, idx) {\n          return displayFormat(newValue[idx]);\n        });\n      }\n    }\n  }\n\n  slider.min = function (_) {\n    if (!arguments.length) return domain[0];\n    domain[0] = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.max = function (_) {\n    if (!arguments.length) return domain[1];\n    domain[1] = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.domain = function (_) {\n    if (!arguments.length) return domain;\n    domain = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.width = function (_) {\n    if (!arguments.length) return width;\n    width = _;\n\n    if (scale) {\n      scale.range([scale.range()[0], scale.range()[0] + width]);\n    }\n\n    return slider;\n  };\n\n  slider.height = function (_) {\n    if (!arguments.length) return height;\n    height = _;\n\n    if (scale) {\n      scale.range([scale.range()[0], scale.range()[0] + height]);\n    }\n\n    return slider;\n  };\n\n  slider.tickFormat = function (_) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = _;\n    return slider;\n  };\n\n  slider.displayFormat = function (_) {\n    if (!arguments.length) return displayFormat;\n    displayFormat = _;\n    return slider;\n  };\n\n  slider.ticks = function (_) {\n    if (!arguments.length) return ticks;\n    ticks = _;\n    return slider;\n  };\n\n  slider.value = function (_) {\n    if (!arguments.length) {\n      if (value.length === 1) {\n        return value[0];\n      }\n\n      return value;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n\n    if (scale) {\n      var pos = toArray.map(scale).map(identityClamped);\n      var newValue = pos.map(scale.invert).map(alignedValue);\n      updateHandle(newValue, true);\n      updateValue(newValue, true);\n    } else {\n      value = toArray;\n    }\n\n    return slider;\n  };\n\n  slider.silentValue = function (_) {\n    if (!arguments.length) {\n      if (value.length === 1) {\n        return value[0];\n      }\n\n      return value;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n\n    if (scale) {\n      var pos = toArray.map(scale).map(identityClamped);\n      var newValue = pos.map(scale.invert).map(alignedValue);\n      updateHandle(newValue, false);\n      updateValue(newValue, false);\n    } else {\n      value = toArray;\n    }\n\n    return slider;\n  };\n\n  slider.default = function (_) {\n    if (!arguments.length) {\n      if (defaultValue.length === 1) {\n        return defaultValue[0];\n      }\n\n      return defaultValue;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n    defaultValue = toArray;\n    value = toArray;\n    return slider;\n  };\n\n  slider.step = function (_) {\n    if (!arguments.length) return step;\n    step = _;\n    return slider;\n  };\n\n  slider.tickValues = function (_) {\n    if (!arguments.length) return tickValues;\n    tickValues = _;\n    return slider;\n  };\n\n  slider.tickPadding = function (_) {\n    if (!arguments.length) return tickPadding;\n    tickPadding = _;\n    return slider;\n  };\n\n  slider.marks = function (_) {\n    if (!arguments.length) return marks;\n    marks = _;\n    return slider;\n  };\n\n  slider.handle = function (_) {\n    if (!arguments.length) return handle;\n    handle = _;\n    return slider;\n  };\n\n  slider.displayValue = function (_) {\n    if (!arguments.length) return displayValue;\n    displayValue = _;\n    return slider;\n  };\n\n  slider.fill = function (_) {\n    if (!arguments.length) return fill;\n    fill = _;\n    return slider;\n  };\n\n  slider.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? slider : value;\n  };\n\n  return slider;\n}\n\nexport function sliderHorizontal(scale) {\n  return slider(bottom, scale);\n}\nexport function sliderVertical(scale) {\n  return slider(left, scale);\n}\nexport function sliderTop(scale) {\n  return slider(top, scale);\n}\nexport function sliderRight(scale) {\n  return slider(right, scale);\n}\nexport function sliderBottom(scale) {\n  return slider(bottom, scale);\n}\nexport function sliderLeft(scale) {\n  return slider(left, scale);\n}","map":{"version":3,"sources":["/home/nicla/Scrivania/SWE/Progetto/Poc/prova/node_modules/d3-simple-slider/src/slider.js"],"names":["axisBottom","axisLeft","axisRight","axisTop","max","min","scan","scaleLinear","scaleTime","adaptListener","dispatch","drag","easeQuadOut","select","UPDATE_DURATION","SLIDER_END_PADDING","KEYBOARD_NUMBER_STEPS","top","right","bottom","left","translateX","x","translateY","y","slider","orientation","scale","copy","value","defaultValue","domain","width","height","displayValue","handle","step","tickValues","tickPadding","marks","tickFormat","ticks","displayFormat","fill","listeners","selection","identityClamped","handleIndex","k","j","transformAlong","transformAcross","axisFunction","handleSelection","fillSelection","textSelection","range","clamp","context","Date","map","d","axis","selectAll","data","enter","append","attr","sliderSelection","sliderEnter","call","on","dragstarted","dragged","dragended","length","merge","i","index","handleEnter","event","datum","change","Math","abs","newValue","adjustedValue","alignedValue","key","preventDefault","text","idx","remove","fadeTickText","computeDragNewValue","pos","invert","classed","updateHandle","updateValue","indices","forEach","val","distances","each","push","indexOf","rect","shift","size","nodes","getBoundingClientRect","getAttribute","split","parseFloat","valueModStep","alignValue","notifyListener","animate","transition","ease","duration","_","arguments","toArray","Array","isArray","sort","a","b","silentValue","default","apply","sliderHorizontal","sliderVertical","sliderTop","sliderRight","sliderBottom","sliderLeft"],"mappings":"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","sourcesContent":["import 'd3-transition';\n\nimport { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\nimport { max, min, scan } from 'd3-array';\nimport { scaleLinear, scaleTime } from 'd3-scale';\n\nimport { adaptListener } from './d3-compat';\nimport { dispatch } from 'd3-dispatch';\nimport { drag } from 'd3-drag';\nimport { easeQuadOut } from 'd3-ease';\nimport { select } from 'd3-selection';\n\nvar UPDATE_DURATION = 200;\nvar SLIDER_END_PADDING = 8;\nvar KEYBOARD_NUMBER_STEPS = 100;\n\nvar top = 1;\nvar right = 2;\nvar bottom = 3;\nvar left = 4;\n\nfunction translateX(x) {\n  return 'translate(' + x + ',0)';\n}\n\nfunction translateY(y) {\n  return 'translate(0,' + y + ')';\n}\n\nfunction slider(orientation, scale) {\n  scale = typeof scale !== 'undefined' ? scale.copy() : null;\n\n  var value = [0];\n  var defaultValue = [0];\n  var domain = [0, 10];\n  var width = 100;\n  var height = 100;\n  var displayValue = true;\n  var handle = 'M-5.5,-5.5v10l6,5.5l6,-5.5v-10z';\n  var step = null;\n  var tickValues = null;\n  var tickPadding = 3;\n  var marks = null;\n  var tickFormat = null;\n  var ticks = null;\n  var displayFormat = null;\n  var fill = null;\n\n  var listeners = dispatch('onchange', 'start', 'end', 'drag');\n\n  var selection = null;\n  var identityClamped = null;\n  var handleIndex = null;\n\n  var k = orientation === top || orientation === left ? -1 : 1;\n  var j = orientation === left || orientation === right ? -1 : 1;\n  var x = orientation === left || orientation === right ? 'y' : 'x';\n  var y = orientation === left || orientation === right ? 'x' : 'y';\n\n  var transformAlong =\n    orientation === top || orientation === bottom ? translateX : translateY;\n\n  var transformAcross =\n    orientation === top || orientation === bottom ? translateY : translateX;\n\n  var axisFunction = null;\n\n  switch (orientation) {\n    case top:\n      axisFunction = axisTop;\n      break;\n    case right:\n      axisFunction = axisRight;\n      break;\n    case bottom:\n      axisFunction = axisBottom;\n      break;\n    case left:\n      axisFunction = axisLeft;\n      break;\n  }\n\n  var handleSelection = null;\n  var fillSelection = null;\n  var textSelection = null;\n\n  if (scale) {\n    domain = [min(scale.domain()), max(scale.domain())];\n\n    if (orientation === top || orientation === bottom) {\n      width = max(scale.range()) - min(scale.range());\n    } else {\n      height = max(scale.range()) - min(scale.range());\n    }\n\n    scale = scale.clamp(true);\n  }\n\n  function slider(context) {\n    selection = context.selection ? context.selection() : context;\n\n    if (!scale) {\n      scale = domain[0] instanceof Date ? scaleTime() : scaleLinear();\n\n      scale = scale\n        .domain(domain)\n        .range(\n          orientation === top || orientation === bottom\n            ? [0, width]\n            : [height, 0]\n        )\n        .clamp(true);\n    }\n\n    identityClamped = scaleLinear()\n      .range(scale.range())\n      .domain(scale.range())\n      .clamp(true);\n\n    // Ensure value is valid\n    value = value.map(function (d) {\n      return scaleLinear().range(domain).domain(domain).clamp(true)(d);\n    });\n\n    tickFormat = tickFormat || scale.tickFormat();\n    displayFormat = displayFormat || tickFormat || scale.tickFormat();\n\n    var axis = selection.selectAll('.axis').data([null]);\n\n    axis\n      .enter()\n      .append('g')\n      .attr('transform', transformAcross(k * 7))\n      .attr('class', 'axis');\n\n    var sliderSelection = selection.selectAll('.slider').data([null]);\n\n    var sliderEnter = sliderSelection\n      .enter()\n      .append('g')\n      .attr('class', 'slider')\n      .attr(\n        'cursor',\n        orientation === top || orientation === bottom\n          ? 'ew-resize'\n          : 'ns-resize'\n      )\n      .call(\n        drag()\n          .on('start', adaptListener(dragstarted))\n          .on('drag', adaptListener(dragged))\n          .on('end', adaptListener(dragended))\n      );\n\n    sliderEnter\n      .append('line')\n      .attr('class', 'track')\n      .attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING)\n      .attr('stroke', '#bbb')\n      .attr('stroke-width', 6)\n      .attr('stroke-linecap', 'round');\n\n    sliderEnter\n      .append('line')\n      .attr('class', 'track-inset')\n      .attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING)\n      .attr('stroke', '#eee')\n      .attr('stroke-width', 4)\n      .attr('stroke-linecap', 'round');\n\n    if (fill) {\n      sliderEnter\n        .append('line')\n        .attr('class', 'track-fill')\n        .attr(\n          x + '1',\n          value.length === 1\n            ? scale.range()[0] - j * SLIDER_END_PADDING\n            : scale(value[0])\n        )\n        .attr('stroke', fill)\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n    }\n\n    sliderEnter\n      .append('line')\n      .attr('class', 'track-overlay')\n      .attr(x + '1', scale.range()[0] - j * SLIDER_END_PADDING)\n      .attr('stroke', 'transparent')\n      .attr('stroke-width', 40)\n      .attr('stroke-linecap', 'round')\n      .merge(sliderSelection.select('.track-overlay'));\n\n    handleSelection = sliderEnter.selectAll('.parameter-value').data(\n      value.map(function (d, i) {\n        return { value: d, index: i };\n      })\n    );\n\n    var handleEnter = handleSelection\n      .enter()\n      .append('g')\n      .attr('class', 'parameter-value')\n      .attr('transform', function (d) {\n        return transformAlong(scale(d.value));\n      })\n      .attr('font-family', 'sans-serif')\n      .attr(\n        'text-anchor',\n        orientation === right\n          ? 'start'\n          : orientation === left\n          ? 'end'\n          : 'middle'\n      );\n\n    handleEnter\n      .append('path')\n      .attr('transform', 'rotate(' + (orientation + 1) * 90 + ')')\n      .attr('d', handle)\n      .attr('class', 'handle')\n      .attr('aria-label', 'handle')\n      .attr('aria-valuemax', domain[1])\n      .attr('aria-valuemin', domain[0])\n      .attr('aria-valuenow', function (d) {\n        return d.value;\n      })\n      .attr(\n        'aria-orientation',\n        orientation === left || orientation === right\n          ? 'vertical'\n          : 'horizontal'\n      )\n      .attr('focusable', 'true')\n      .attr('tabindex', 0)\n      .attr('fill', 'white')\n      .attr('stroke', '#777')\n      .on(\n        'keydown',\n        adaptListener(function (event, datum) {\n          var change = step || (domain[1] - domain[0]) / KEYBOARD_NUMBER_STEPS;\n\n          var index = marks\n            ? scan(\n                marks.map(function (d) {\n                  return Math.abs(value[datum.index] - d);\n                })\n              )\n            : null;\n\n          // TODO: Don't need to loop over value because we know which element needs to change\n          function newValue(adjustedValue) {\n            return value.map(function (d, j) {\n              if (value.length === 2) {\n                return j === datum.index\n                  ? datum.index === 0\n                    ? Math.min(adjustedValue, alignedValue(value[1]))\n                    : Math.max(adjustedValue, alignedValue(value[0]))\n                  : d;\n              } else {\n                return j === datum.index ? adjustedValue : d;\n              }\n            });\n          }\n\n          switch (event.key) {\n            case 'ArrowLeft':\n            case 'ArrowDown':\n              if (marks) {\n                slider.value(newValue(marks[Math.max(0, index - 1)]));\n              } else {\n                slider.value(newValue(+value[datum.index] - change));\n              }\n\n              event.preventDefault();\n              break;\n            case 'PageDown':\n              if (marks) {\n                slider.value(newValue(marks[Math.max(0, index - 2)]));\n              } else {\n                slider.value(newValue(+value[datum.index] - 2 * change));\n              }\n\n              event.preventDefault();\n              break;\n            case 'ArrowRight':\n            case 'ArrowUp':\n              if (marks) {\n                slider.value(\n                  newValue(marks[Math.min(marks.length - 1, index + 1)])\n                );\n              } else {\n                slider.value(newValue(+value[datum.index] + change));\n              }\n\n              event.preventDefault();\n              break;\n            case 'PageUp':\n              if (marks) {\n                slider.value(\n                  newValue(marks[Math.min(marks.length - 1, index + 2)])\n                );\n              } else {\n                slider.value(newValue(+value[datum.index] + 2 * change));\n              }\n\n              event.preventDefault();\n              break;\n            case 'Home':\n              slider.value(newValue(domain[0]));\n              event.preventDefault();\n              break;\n            case 'End':\n              slider.value(newValue(domain[1]));\n              event.preventDefault();\n              break;\n          }\n        })\n      );\n\n    if (displayValue) {\n      handleEnter\n        .append('text')\n        .attr('font-size', 10) // TODO: Remove coupling to font-size in d3-axis\n        .attr(y, k * (24 + tickPadding))\n        .attr(\n          'dy',\n          orientation === top\n            ? '0em'\n            : orientation === bottom\n            ? '.71em'\n            : '.32em'\n        )\n        .attr('transform', value.length > 1 ? 'translate(0,0)' : null)\n        .text(function (d, idx) {\n          return displayFormat(value[idx]);\n        });\n    }\n\n    context\n      .select('.track')\n      .attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n\n    context\n      .select('.track-inset')\n      .attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n\n    if (fill) {\n      context\n        .select('.track-fill')\n        .attr(x + '2', value.length === 1 ? scale(value[0]) : scale(value[1]));\n    }\n\n    context\n      .select('.track-overlay')\n      .attr(x + '2', scale.range()[1] + j * SLIDER_END_PADDING);\n\n    context\n      .select('.axis')\n      .call(\n        axisFunction(scale)\n          .tickFormat(tickFormat)\n          .ticks(ticks)\n          .tickValues(tickValues)\n          .tickPadding(tickPadding)\n      );\n\n    // https://bl.ocks.org/mbostock/4323929\n    selection.select('.axis').select('.domain').remove();\n\n    context.select('.axis').attr('transform', transformAcross(k * 7));\n\n    context\n      .selectAll('.axis text')\n      .attr('fill', '#aaa')\n      .attr(y, k * (17 + tickPadding))\n      .attr(\n        'dy',\n        orientation === top ? '0em' : orientation === bottom ? '.71em' : '.32em'\n      )\n      .attr(\n        'text-anchor',\n        orientation === right\n          ? 'start'\n          : orientation === left\n          ? 'end'\n          : 'middle'\n      );\n\n    context.selectAll('.axis line').attr('stroke', '#aaa');\n\n    context.selectAll('.parameter-value').attr('transform', function (d) {\n      return transformAlong(scale(d.value));\n    });\n\n    fadeTickText();\n\n    function computeDragNewValue(pos) {\n      var adjustedValue = alignedValue(scale.invert(pos));\n      return value.map(function (d, i) {\n        if (value.length === 2) {\n          return i === handleIndex\n            ? handleIndex === 0\n              ? Math.min(adjustedValue, alignedValue(value[1]))\n              : Math.max(adjustedValue, alignedValue(value[0]))\n            : d;\n        } else {\n          return i === handleIndex ? adjustedValue : d;\n        }\n      });\n    }\n\n    function dragstarted(event) {\n      select(this).classed('active', true);\n\n      var pos = identityClamped(\n        orientation === bottom || orientation === top ? event.x : event.y\n      );\n\n      // Handle cases where both handles are at the same end of the slider\n      if (value[0] === domain[0] && value[1] === domain[0]) {\n        handleIndex = 1;\n      } else if (value[0] === domain[1] && value[1] === domain[1]) {\n        handleIndex = 0;\n      } else {\n        handleIndex = scan(\n          value.map(function (d) {\n            return Math.abs(d - alignedValue(scale.invert(pos)));\n          })\n        );\n      }\n\n      var newValue = value.map(function (d, i) {\n        return i === handleIndex ? alignedValue(scale.invert(pos)) : d;\n      });\n\n      updateHandle(newValue);\n      listeners.call(\n        'start',\n        sliderSelection,\n        newValue.length === 1 ? newValue[0] : newValue\n      );\n      updateValue(newValue, true);\n    }\n\n    function dragged(event) {\n      var pos = identityClamped(\n        orientation === bottom || orientation === top ? event.x : event.y\n      );\n      var newValue = computeDragNewValue(pos);\n\n      updateHandle(newValue);\n      listeners.call(\n        'drag',\n        sliderSelection,\n        newValue.length === 1 ? newValue[0] : newValue\n      );\n      updateValue(newValue, true);\n    }\n\n    function dragended(event) {\n      select(this).classed('active', false);\n\n      var pos = identityClamped(\n        orientation === bottom || orientation === top ? event.x : event.y\n      );\n      var newValue = computeDragNewValue(pos);\n\n      updateHandle(newValue);\n      listeners.call(\n        'end',\n        sliderSelection,\n        newValue.length === 1 ? newValue[0] : newValue\n      );\n      updateValue(newValue, true);\n\n      handleIndex = null;\n    }\n\n    textSelection = selection.selectAll('.parameter-value text');\n    fillSelection = selection.select('.track-fill');\n  }\n\n  function fadeTickText() {\n    if (selection) {\n      if (displayValue) {\n        var indices = [];\n        value.forEach(function (val) {\n          var distances = [];\n\n          selection.selectAll('.axis .tick').each(function (d) {\n            distances.push(Math.abs(d - val));\n          });\n\n          indices.push(scan(distances));\n        });\n\n        selection\n          .selectAll('.axis .tick text')\n          .attr('opacity', function (d, i) {\n            return ~indices.indexOf(i) ? 0 : 1;\n          });\n\n        if (textSelection && value.length > 1) {\n          var rect;\n          var shift;\n          var pos = [];\n          var size = [];\n\n          textSelection.nodes().forEach(function (d, i) {\n            rect = d.getBoundingClientRect();\n\n            shift = d.getAttribute('transform').split(/[()]/)[1].split(',')[\n              x === 'x' ? 0 : 1\n            ];\n\n            pos[i] = rect[x] - parseFloat(shift);\n            size[i] = rect[x === 'x' ? 'width' : 'height'];\n          });\n\n          if (x === 'x') {\n            shift = Math.max(0, (pos[0] + size[0] - pos[1]) / 2);\n\n            textSelection.attr('transform', function (d, i) {\n              return 'translate(' + (i === 1 ? shift : -shift) + ',0)';\n            });\n          } else {\n            shift = Math.max(0, (pos[1] + size[1] - pos[0]) / 2);\n\n            textSelection.attr('transform', function (d, i) {\n              return 'translate(0,' + (i === 1 ? -shift : shift) + ')';\n            });\n          }\n        }\n      }\n    }\n  }\n\n  function alignedValue(newValue) {\n    if (marks) {\n      var index = scan(\n        marks.map(function (d) {\n          return Math.abs(newValue - d);\n        })\n      );\n\n      return marks[index];\n    }\n\n    if (step) {\n      var valueModStep = (newValue - domain[0]) % step;\n      var alignValue = newValue - valueModStep;\n\n      if (valueModStep * 2 > step) {\n        alignValue += step;\n      }\n\n      return newValue instanceof Date ? new Date(alignValue) : alignValue;\n    }\n\n    return newValue;\n  }\n\n  function updateValue(newValue, notifyListener) {\n    if (\n      value[0] !== newValue[0] ||\n      (value.length > 1 && value[1] !== newValue[1])\n    ) {\n      value = newValue;\n\n      if (notifyListener) {\n        listeners.call(\n          'onchange',\n          slider,\n          newValue.length === 1 ? newValue[0] : newValue\n        );\n      }\n\n      fadeTickText();\n    }\n  }\n\n  function updateHandle(newValue, animate) {\n    if (selection) {\n      animate = typeof animate !== 'undefined' ? animate : false;\n\n      if (animate) {\n        selection\n          .selectAll('.parameter-value')\n          .data(\n            newValue.map(function (d, i) {\n              return { value: d, index: i };\n            })\n          )\n          .transition()\n          .ease(easeQuadOut)\n          .duration(UPDATE_DURATION)\n          .attr('transform', function (d) {\n            return transformAlong(scale(d.value));\n          })\n          .select('.handle')\n          .attr('aria-valuenow', function (d) {\n            return d.value;\n          });\n\n        if (fill) {\n          fillSelection\n            .transition()\n            .ease(easeQuadOut)\n            .duration(UPDATE_DURATION)\n            .attr(\n              x + '1',\n              value.length === 1\n                ? scale.range()[0] - k * SLIDER_END_PADDING\n                : scale(newValue[0])\n            )\n            .attr(\n              x + '2',\n              value.length === 1 ? scale(newValue[0]) : scale(newValue[1])\n            );\n        }\n      } else {\n        selection\n          .selectAll('.parameter-value')\n          .data(\n            newValue.map(function (d, i) {\n              return { value: d, index: i };\n            })\n          )\n          .attr('transform', function (d) {\n            return transformAlong(scale(d.value));\n          })\n          .select('.handle')\n          .attr('aria-valuenow', function (d) {\n            return d.value;\n          });\n\n        if (fill) {\n          fillSelection\n            .attr(\n              x + '1',\n              value.length === 1\n                ? scale.range()[0] - k * SLIDER_END_PADDING\n                : scale(newValue[0])\n            )\n            .attr(\n              x + '2',\n              value.length === 1 ? scale(newValue[0]) : scale(newValue[1])\n            );\n        }\n      }\n\n      if (displayValue) {\n        textSelection.text(function (d, idx) {\n          return displayFormat(newValue[idx]);\n        });\n      }\n    }\n  }\n\n  slider.min = function (_) {\n    if (!arguments.length) return domain[0];\n    domain[0] = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.max = function (_) {\n    if (!arguments.length) return domain[1];\n    domain[1] = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.domain = function (_) {\n    if (!arguments.length) return domain;\n    domain = _;\n\n    if (scale) {\n      scale.domain(domain);\n    }\n\n    return slider;\n  };\n\n  slider.width = function (_) {\n    if (!arguments.length) return width;\n    width = _;\n\n    if (scale) {\n      scale.range([scale.range()[0], scale.range()[0] + width]);\n    }\n\n    return slider;\n  };\n\n  slider.height = function (_) {\n    if (!arguments.length) return height;\n    height = _;\n\n    if (scale) {\n      scale.range([scale.range()[0], scale.range()[0] + height]);\n    }\n\n    return slider;\n  };\n\n  slider.tickFormat = function (_) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = _;\n    return slider;\n  };\n\n  slider.displayFormat = function (_) {\n    if (!arguments.length) return displayFormat;\n    displayFormat = _;\n    return slider;\n  };\n\n  slider.ticks = function (_) {\n    if (!arguments.length) return ticks;\n    ticks = _;\n    return slider;\n  };\n\n  slider.value = function (_) {\n    if (!arguments.length) {\n      if (value.length === 1) {\n        return value[0];\n      }\n\n      return value;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n\n    if (scale) {\n      var pos = toArray.map(scale).map(identityClamped);\n      var newValue = pos.map(scale.invert).map(alignedValue);\n\n      updateHandle(newValue, true);\n      updateValue(newValue, true);\n    } else {\n      value = toArray;\n    }\n\n    return slider;\n  };\n\n  slider.silentValue = function (_) {\n    if (!arguments.length) {\n      if (value.length === 1) {\n        return value[0];\n      }\n\n      return value;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n\n    if (scale) {\n      var pos = toArray.map(scale).map(identityClamped);\n      var newValue = pos.map(scale.invert).map(alignedValue);\n\n      updateHandle(newValue, false);\n      updateValue(newValue, false);\n    } else {\n      value = toArray;\n    }\n\n    return slider;\n  };\n\n  slider.default = function (_) {\n    if (!arguments.length) {\n      if (defaultValue.length === 1) {\n        return defaultValue[0];\n      }\n\n      return defaultValue;\n    }\n\n    var toArray = Array.isArray(_) ? _ : [_];\n\n    toArray.sort(function (a, b) {\n      return a - b;\n    });\n\n    defaultValue = toArray;\n    value = toArray;\n    return slider;\n  };\n\n  slider.step = function (_) {\n    if (!arguments.length) return step;\n    step = _;\n    return slider;\n  };\n\n  slider.tickValues = function (_) {\n    if (!arguments.length) return tickValues;\n    tickValues = _;\n    return slider;\n  };\n\n  slider.tickPadding = function (_) {\n    if (!arguments.length) return tickPadding;\n    tickPadding = _;\n    return slider;\n  };\n\n  slider.marks = function (_) {\n    if (!arguments.length) return marks;\n    marks = _;\n    return slider;\n  };\n\n  slider.handle = function (_) {\n    if (!arguments.length) return handle;\n    handle = _;\n    return slider;\n  };\n\n  slider.displayValue = function (_) {\n    if (!arguments.length) return displayValue;\n    displayValue = _;\n    return slider;\n  };\n\n  slider.fill = function (_) {\n    if (!arguments.length) return fill;\n    fill = _;\n    return slider;\n  };\n\n  slider.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? slider : value;\n  };\n\n  return slider;\n}\n\nexport function sliderHorizontal(scale) {\n  return slider(bottom, scale);\n}\n\nexport function sliderVertical(scale) {\n  return slider(left, scale);\n}\n\nexport function sliderTop(scale) {\n  return slider(top, scale);\n}\n\nexport function sliderRight(scale) {\n  return slider(right, scale);\n}\n\nexport function sliderBottom(scale) {\n  return slider(bottom, scale);\n}\n\nexport function sliderLeft(scale) {\n  return slider(left, scale);\n}\n"]},"metadata":{},"sourceType":"module"}